<footer class="footer footer-static footer-light navbar-border">

      <p class="clearfix blue-grey lighten-2 text-sm-center mb-0 px-2"><span class="float-md-left d-block d-md-inline-block">Copyright  &copy; 2023 <a class="text-bold-800 grey darken-2" href="<?php echo base_url(); ?>" target="_blank">Congreg8 </a>, All rights reserved. </span><span class="float-md-right d-block d-md-inline-blockd-none d-lg-block">Hand-crafted & Made with <i class="ft-heart pink"></i></span></p>

    </footer>

<!-- BEGIN VENDOR JS-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script src="<?php echo base_url();?>public/app-assets/vendors/js/vendors.min.js"></script>

  <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/tables/jquery.dataTables.min.js"></script>

      <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/tables/datatable/dataTables.bootstrap4.min.js"></script>

      <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/tables/datatable/dataTables.responsive.min.js"></script>

      <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/tables/datatable/dataTables.rowReorder.min.js"></script>

      <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/forms/icheck/icheck.min.js"></script>

      <script src="<?php echo base_url(); ?>public/assets/js/datetimepicker/jquery.datetimepicker.full.min.js"></script>

      <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/tables/datatable/dataTables.buttons.min.js"></script>
      <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/tables/pdfmake.min.js"></script>
      <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/tables/vfs_fonts.js"></script>
      <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/tables/buttons.html5.min.js"></script>
      <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/tables/buttons.print.min.js"></script>
      <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/tables/buttons.colVis.min.js"></script>
      <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/tables/datatable/buttons.bootstrap4.min.js"></script>
      <script src="<?php echo base_url(); ?>/public/app-assets/vendors/js/tables/jszip.min.js"></script>
      <script src="<?php echo base_url(); ?>/public/app-assets/js/scripts/tables/datatables-extensions/datatable-button/datatable-html5.js"></script>

    <!-- BEGIN VENDOR JS-->

    <!-- BEGIN PAGE VENDOR JS-->

    <script src="<?php echo base_url();?>public/app-assets/vendors/js/charts/raphael-min.js"></script>

    <script src="<?php echo base_url();?>public/app-assets/vendors/js/charts/morris.min.js"></script>

    <script src="<?php echo base_url();?>public/app-assets/vendors/js/charts/chart.min.js"></script>

    <script src="<?php echo base_url();?>public/app-assets/vendors/js/charts/jvector/jquery-jvectormap-2.0.3.min.js"></script>

    <script src="<?php echo base_url();?>public/app-assets/vendors/js/charts/jvector/jquery-jvectormap-world-mill.js"></script>

    <script src="<?php echo base_url();?>public/app-assets/vendors/js/extensions/moment.min.js"></script>

    <script src="<?php echo base_url();?>public/app-assets/vendors/js/extensions/underscore-min.js"></script>

    <script src="<?php echo base_url();?>public/app-assets/vendors/js/extensions/clndr.min.js"></script>

    <script src="<?php echo base_url();?>public/app-assets/vendors/js/charts/echarts/echarts.js"></script>

    <script src="<?php echo base_url();?>public/app-assets/vendors/js/extensions/unslider-min.js"></script>

    <script src="<?php echo base_url();?>public/assets/js/definations.js"></script>

    <script src="<?php echo base_url();?>public/assets/js/global.js"></script>

    <script src="<?php echo base_url();?>public/assets/js/script.js"></script>

    <script src="<?php echo base_url();?>public/assets/js/dashboard.js"></script>
    
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


   <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js" integrity="sha512-j7/1CJweOskkQiS5RD9W8zhEG9D9vpgByNGxPIqkO5KrXrwyDAroM9aQ9w8J7oRqwxGyz429hPVk/zR6IOMtSA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>






    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

    
    
    <!-- END PAGE VENDOR JS-->

    <?php   

  if(!empty($styles)){

    foreach($styles as $style){

       

       echo '<link rel="stylesheet" type="text/css" href="'.base_url().''.$style.'">';

   }

  }

   ?>



    <!-- BEGIN ROBUST JS-->

    <script src="<?php echo base_url();?>public/app-assets/js/core/app-menu.js"></script>

    <script src="<?php echo base_url();?>public/app-assets/js/core/app.js"></script>

    <!-- END ROBUST JS-->

    <!-- BEGIN PAGE LEVEL JS-->

    <script src="<?php echo base_url();?>public/app-assets/js/scripts/pages/dashboard-ecommerce.js"></script>

    <!-- END PAGE LEVEL JS-->

    <script src="https://lipis.github.io/bootstrap-sweetalert/dist/sweetalert.js"></script>

    <script src="<?php echo base_url(); ?>public/app-assets/vendors/js/forms/tags/tagging.min.js"></script>
    <script src="<?php echo base_url(); ?>public/app-assets/vendors/js/ui/prism.min.js"></script>
    <script src="<?php echo base_url(); ?>public/app-assets/js/scripts/forms/tags/tagging.js"></script>


    

  <?php   

  if(!empty($scripts)){

    foreach($scripts as $script){

       

       

   }

  }

   ?>
<script>
  $(document).ready(function () {
    $('#example').DataTable();
});
  </script>


<script>

$(document).on("click", ".dtpickdate" , function() {

    $(this).datetimepicker({timepicker:false, format:"d-m-Y"}).focus();

});

</script>



            <script type="text/javascript">

         $(document).ready(function() {
            // Delete Record

            $(document).on("click", '.del-record', function(event) { 



                var del_id = $(this).attr('id');



                    swal({

                        title: "Are you sure?",

                        text: "You will not be able to recover this record!",

                        icon: "warning",

                        showCancelButton: true,

                        buttons: {

                                cancel: {

                                    text: "No, cancel please!",

                                    value: null,

                                    visible: true,

                                    className: "btn-warning",

                                    closeModal: false,

                                },

                                confirm: {

                                    text: "Yes, delete it!",

                                    value: true,

                                    visible: true,

                                    className: "",

                                    closeModal: false

                                }

                        }

                    }).then(isConfirm => {

                    if (isConfirm) {



                            var request =  $.ajax({

                                    url: "delcontacts",

                                    type: "POST",

                                    data: {delid : del_id},

                                    dataType: "html"

                                });





                            request.done(function(msg) {



                                if(msg === "yes"){

                                    swal("Deleted!", "Record Deleted Successfully", "success");  

                                    // attendance_data();

                                    $('#contact-data').DataTable().ajax.reload();

                                }else{

                                    alert('Updation Failed');

                                }

                                

                            });



                            

                        } else {

                            swal("Cancelled", "Operation Cancelled", "error");

                        }

                    });

            });

                        

         

         });

      </script>

      <script>

         $(document).ready(function(){

          var status = "";
          var type = "" ;

          load_contacts_table(status,type);


          function load_contacts_table(status,type){

            

            if ( $.fn.dataTable.isDataTable( '#contact-data' ) ) {
              $( '#contact-data' ).DataTable().destroy();
            }


              var dataTable = $('#contact-data').DataTable({

               'processing': true,

               'serverSide': true,

               'serverMethod': 'POST',

               dom: 'Blfrtip',
               buttons: [
                     'copyHtml5',
                     'excelHtml5',
                     'csvHtml5',
                     'pdfHtml5'
               ],

               columnDefs: [
                    {
                        target: 1,
                        visible: false,
                    },
                ],

               //'searching': false, // Remove default Search Control

               'ajax': {

                  'url':'getcontacts',

                  'data': function(data){
                    data.searchByStatus = status;
                    data.searchByType = type;

                 }

               },

               'columns': [

                  { data: 'name' }, 

                  { data: 'email' },

                  { data: 'phone' },

                  { data: 'status' },

                  { data: 'form_type' },

                  { data: 'action' },

                  { data: 'tags' , visible: false},

               ],

               

             });

              if(status != ""){
                dataTable.draw();
              }

              if(type != ""){
                dataTable.draw();
              }

          }


          $('#status').on('change', function() {
                  load_contacts_table($(this).val(),$("#type").val());
          });


          $('#type').on('change', function() {
                  load_contacts_table($("#status").val(),$(this).val());
          });


         });

      </script>

            <script>

         $(document).ready(function(){

          var status = "";
          var type = "" ;

          load_contacts_table(status,type);


          function load_contacts_table(status,type){

            

            if ( $.fn.dataTable.isDataTable( '#church-data' ) ) {
              $( '#church-data' ).DataTable().destroy();
            }


              var dataTable = $('#church-data').DataTable({

               'processing': true,

               'serverSide': true,

               'serverMethod': 'POST',

               dom: 'Blfrtip',
               buttons: [
                     'copyHtml5',
                     'excelHtml5',
                     'csvHtml5',
                     'pdfHtml5'
               ],

               //'searching': false, // Remove default Search Control

               'ajax': {

                  'url':base_url+'/getchurch',

                  'data': function(data){
                    data.searchByStatus = status;
                    data.searchByType = type;

                 }

               },

               'columns': [

                  { data: 'church_name' }, 

                  { data: 'church_email' },

                  { data: 'website' },


                  { data: 'phone' },

                  { data: 'pastor_name' },

                  { data: 'time_zone' },

                  { data: 'plan' },



                  { data: 'action' },

               ]

             });

              if(status != ""){
                dataTable.draw();
              }

              if(type != ""){
                dataTable.draw();
              }

          }


          $('#status').on('change', function() {
                  load_contacts_table($(this).val(),$("#type").val());
          });


          $('#type').on('change', function() {
                  load_contacts_table($("#status").val(),$(this).val());
          });


          $('#save_church').click(function(){
                  var church_name = $("#church_name").val(); 
                  var church_email = $("#church_email").val(); 
                  var phone = $("#phone").val(); 
                  var website = $("#website").val(); 
                  var address = $("#address").val(); 
                  var pastor_name = $("#pastor_name").val(); 
                  var time_zone = $("#time_zone").val();
                  var plan = $("#plan").val();
                  var id = $("#id").val();


               
                
                  $.ajax({

                     url: "save_churches",
                     data:{
                        church_name:church_name,
                        church_email:church_email,
                        phone:phone,
                        website:website,
                        address:address,
                        pastor_name:pastor_name,
                        time_zone:time_zone,
                        plan:plan,
                        id:id
                     },
                     type: "POST",
                     dataType: "html",
                     success:function(data) {
                        //  alert(data);
                              if(data==1)
                              {
                                  toastr.error('Make a payment  for Pro plan!', 'error');
                              }
                              else
                              {
                                   toastr.success('Record Updated Sucessfully', 'success');
                              }
                              $('#addChurch').modal('toggle');
                              //toastr.success('Church Created Successfully', 'Success!');
                              load_contacts_table(status = "",type = "");
                           }

                     });
            

            });


         });

      </script>


   <!-- form table -->

   <script type="text/javascript">
         
        



          attendance_data();



          function attendance_data(){



            var visible_val = false;



            var role = "<?php echo session()->user_role ?>";



            if(role == "superadmin"){

              visible_val = true;

            }



            if ( $.fn.dataTable.isDataTable( '#form-data') ) {

               

              $( '#form-data' ).DataTable().destroy();

            }



            var dataTable = $('#form-data').DataTable({

              'processing': true,

              'serverSide': true,

              'serverMethod': 'POST',

               dom: 'Blfrtip',

               buttons: [

                     'copyHtml5',

                     'excelHtml5',

                     'csvHtml5',

                     'pdfHtml5'

               ],
               


             

              //'searching': false, // Remove default Search Control

              'ajax': {

                 'url':'getformdata',

                 'data': function(data){

                }

              },

             

              'columns': [


                 { data: 'Title' },

                 { data: 'Status'},

                 { data: 'action' },

              ],


            });


          }
      </script>



   <!-- form table end -->












      <script type="text/javascript">
         
          var selchurch = 0;



          attendance_data(selchurch);



          function attendance_data(selchurch){



            var visible_val = false;



            var role = "<?php echo session()->user_role ?>";



            if(role == "superadmin"){

              visible_val = true;

            }



            if ( $.fn.dataTable.isDataTable( '#attendance-data' ) ) {

               

              $( '#attendance-data' ).DataTable().destroy();

            }



            var dataTable = $('#attendance-data').DataTable({

              'processing': true,

              'serverSide': true,

              'serverMethod': 'POST',

               dom: 'Blfrtip',

               buttons: [

                     'copyHtml5',

                     'excelHtml5',

                     'csvHtml5',

                     'pdfHtml5'

               ],
               


             

              //'searching': false, // Remove default Search Control

              'ajax': {

                 'url':'getattendance',

                 'data': function(data){

                    data.searchByChurch = selchurch;

                }

              },

             

              'columns': [

                 { data: 'church_name',visible : visible_val }, 

                 { data: 'name' },

                 { data: 'phone',visible : true },

                 { data: 'att_type' },

                 { data: 'form_type' },

                 { data: 'check_in' },

                 { data: 'action' },

              ],

              order: [[5, 'desc']],

            });



            if(selchurch >0){

              dataTable.draw();

            }



          }
      </script>


<script>
   function myFunction() {
   var x = document.getElementById("myDIV");
   if (x.style.display === "none") {
      x.style.display = "block";
   } else {
      x.style.display = "none";
   }
   }
</script>

 <script>



function myFunction() {



  var x = document.getElementById("password");



  if (x.type === "password") {



    x.type = "text";



  } else {



    x.type = "password";



  }



}

</script>


<script>

         $(document).ready(function(){

          var church = "";
          var type = "" ;

          load_survey_table(church,type);


          function load_survey_table(church,type){

            

            if ( $.fn.dataTable.isDataTable( '#survey-data' ) ) {
              $( '#survey-data' ).DataTable().destroy();
            }


              var dataTable = $('#survey-data').DataTable({

               'processing': true,

               'serverSide': true,

               'serverMethod': 'POST',

               dom: 'Blfrtip',
               buttons: [
                     'copyHtml5',
                     'excelHtml5',
                     'csvHtml5',
                     'pdfHtml5'
               ],

               //'searching': false, // Remove default Search Control

               'ajax': {

                  'url':'getsurvey',

                  'data': function(data){
                    data.searchByChurch = church;
                    data.searchByType = type;

                 }

               },

               order: [[3, 'desc']],

               'columns': [

                  { data: 'name' }, 
                 
                  { data: 'date' },

                  { data: 'title' },
                  
                  { data: 'Answer' },

                  { data: 'type' },

                  

               ]

             });

              if(status != ""){
                dataTable.draw();
              }

              if(type != ""){
                dataTable.draw();
              }

          }


         });

      </script>




<script>

         $(document).ready(function(){

          var sub_id = $('#sub_id').val();
          load_survey_answer_table(sub_id);


          function load_survey_answer_table(sub_id){

            

            if ( $.fn.dataTable.isDataTable( '#survey-answer-data' ) ) {
              $( '#survey-answer-data' ).DataTable().destroy();
            }


              var dataTable = $('#survey-answer-data').DataTable({

               'processing': true,

               'serverSide': true,

               'serverMethod': 'POST',

               dom: 'Blfrtip',
               buttons: [
                     'copyHtml5',
                     'excelHtml5',
                     'csvHtml5',
                     'pdfHtml5'
               ],

               //'searching': false, // Remove default Search Control

               'ajax': {

                  'url':'getsurveyanswer',

                  'data': function(data){
                    data.subid = sub_id;

                 }

               },

               'columns': [

                  { data: 'question' }, 

                   { data: 'Answer' },
                 
                  { data: 'date' },

                  { data: 'type' },

                  

               ]

             });

         

          }


         });

      </script>



<script>

         $(document).ready(function(){


          var sub_id = $('#id').val();
          load_form_submitted_value_table(sub_id);


          function load_form_submitted_value_table(sub_id){

            var url='<?php  echo base_url()?>';



            

            if ( $.fn.dataTable.isDataTable( '#form-submitted-data' ) ) {
              $( '#form-submitted-data' ).DataTable().destroy();
            }


              var dataTable = $('#form-submitted-data').DataTable({

               'processing': true,

               'serverSide': true,

               'serverMethod': 'POST',

               dom: 'Blfrtip',
               buttons: [
                     'copyHtml5',
                     'excelHtml5',
                     'csvHtml5',
                     'pdfHtml5'
               ],

               //'searching': false, // Remove default Search Control

               'ajax': {

                  'url': url +'getusersubmitteddata',

                  'data': function(data){
                    data.subid = sub_id;

                 }

               },

               'columns': [

                  { data: 'fd_title' }, 

                   { data: 'fd_value' },
                 
                  { data: 'fd_created_at' },


                  

               ]

             });

         

          }


         });

      </script>





<script>

         $(document).ready(function(){

          var church = "";
          var type = "" ;

          load_interests_table(church,type);


          function load_interests_table(church,type){

            

            if ( $.fn.dataTable.isDataTable( '#interests-data' ) ) {
              $( '#interests-data' ).DataTable().destroy();
            }


              var dataTable = $('#interests-data').DataTable({

               'processing': true,

               'serverSide': true,

               'serverMethod': 'POST',

               dom: 'Blfrtip',
               buttons: [
                     'copyHtml5',
                     'excelHtml5',
                     'csvHtml5',
                     'pdfHtml5'
               ],

               //'searching': false, // Remove default Search Control

               'ajax': {

                  'url':'getinterests',

                  'data': function(data){
                    data.searchByChurch = church;
                    data.searchByType = type;

                 }

               },

               order: [[3, 'desc']],

               'columns': [

                  { data: 'name' }, 

                  // { data: 'church_id' }, 

                  { data: 'Answer' },

                  { data: 'type' },

                  { data: 'date' },

               ]

             });

              if(status != ""){
                dataTable.draw();
              }

              if(type != ""){
                dataTable.draw();
              }

          }


          $('#survey_type').on('change', function() {
                  load_interests_table($(this).val(),$("#interests").val());
          });


          $('#interests').on('change', function() {
                  load_interests_table($("#survey_type").val(),$(this).val());
          });


         });

      </script>

      <!-- 15.march.2023 start -->
      <script>
$(document).ready(function() {
$(document).on("click", '.del-record-notes', function(event) {
var del_id = $(this).attr('id');
// alert(del_id);
swal({
        title: "Are you sure?",
        // text: "You will not be able to recover this imaginary file!",
        type: "warning",
        showCancelButton: true,
        confirmButtonClass: "btn-danger",
        confirmButtonText: "Yes, delete it!",
        cancelButtonText: "No, cancel please!",
        closeOnConfirm: false,
        closeOnCancel: false
      },
      function(isConfirm) {
        if (isConfirm) {
          $.ajax({
            url: "<?php echo base_url(); ?>/delnotes",
            type: "POST",
            data: {delid : del_id},
            dataType: "html",
             error: function() {
                alert('Something is wrong');
             },
             success: function(data) {
                  // $("#"+id).remove();
                  swal("Deleted!", "Notes Deleted Successfully.", "success");
                  window.location.reload();
             }
          });
        } else {
          swal("Cancelled", "Operation Cancelled by User", "error");
        }
});

});
});

</script>

<script>

$(document).ready(function() {

   $(document).on("click", '.cancel', function(event) { 

   $('.assignto_select').removeAttr("selected");

   $('input[name=task_id]').val("");

   $('input[name=title]').val("");

   $('#w3review').text("");                    

   $('input[name=due_date]').val("");

    });

//$('.del-record').on('click',function(){

$(document).on("click", '.edit-record', function(event) { 

   // $('.assignto_select').removeAttr("selected");

   var del_id = $(this).attr('id');

  

      $.ajax({

         url: "<?php echo base_url(); ?>/editnotes",//Enter full URL

         type: 'POST',

         dataType:'JSON',

         data: {delid : del_id},

         success: function(data){

             console.log(data);    

            $('input[name=notes_id]').val(data.id);

            $('#w3review').text(data.text); 

         }

      });

});

});

</script>

<script>

function myFunction() {

  var x = document.getElementById("myDIV");

  if (x.style.display === "none") {

    x.style.display = "block";

  } else {

    x.style.display = "none";

  }

}

</script>
<!-- task -->
<script>
$(document).ready(function() {
$(document).on("click", '.task-del-record', function(event) {
var del_id = $(this).attr('id');
alert(del_id);
swal({
        title: "Are you sure?",
        // text: "You will not be able to recover this imaginary file!",
        type: "warning",
        showCancelButton: true,
        confirmButtonClass: "btn-danger",
        confirmButtonText: "Yes, delete it!",
        cancelButtonText: "No, cancel please!",
        closeOnConfirm: false,
        closeOnCancel: false
      },
      function(isConfirm) {
        if (isConfirm) {
          $.ajax({
            url: "<?php echo base_url(); ?>/deltask",
            type: "POST",
            data: {delid : del_id},
            dataType: "html",
             error: function() {
                alert('Something is wrong');
             },
             success: function(data) {
                  // $("#"+id).remove();
                  swal("Deleted!", "Notes Deleted Successfully.", "success");
                  window.location.reload();
             }
          });
        } else {
          swal("Cancelled", "Operation Cancelled by User", "error");
        }
});

});
});

</script>

<script>

$(document).ready(function() {

   $(document).on("click", '.cancel', function(event) { 

   $('.assignto_select').removeAttr("selected");

   $('input[name=task_id]').val("");

   $('input[name=title]').val("");

   $('#w3review').text("");                    

   $('input[name=due_date]').val("");

    });

//$('.del-record').on('click',function(){

$(document).on("click", '.task-edit-record', function(event) { 

   // $('.assignto_select').removeAttr("selected");

   var taskid = $(this).attr('id');

  // alert(taskid);

      $.ajax({

         url: "<?php echo base_url(); ?>/edittask",//Enter full URL

         type: 'POST',

         dataType:'JSON',

         data: {taskid : taskid},

         success: function(data){

             console.log(data);    

            $('input[name=notes_id]').val(data.id);

            $('#w3review').text(data.text);
            $('#due_date').val(data.due_date); 
            $('#title').val(data.title); 
            $('#assign_to').val(data.assign_to);


         }

      });

});

});

</script>



<!-- //////////////////integration -->
<script>

$(document).ready(function() {

$(document).on("click", '.integration-edit', function(event) { 
// alert("kjfhwueiafhweafrlw");
   $('.assignto_select').removeAttr("selected");

   var del_id = $(this).attr('id');

  // alert(del_id);

      $.ajax({

         url: "<?php echo base_url(); ?>integrationEdit",//Enter full URL

         type: 'POST',

         dataType:'JSON',

         data: {delid : del_id},

         success: function(data){

            //  console.log(data);    

            $('input[name=id]').val(data.id);

            $('#key_value').val(data.key_value); 

         }

      });

});

});


// START DELETING CONTACTS
$(document).ready(function() {
$(document).on("click", '.contact-del-record', function(event) {
var del_id = $(this).attr('id');
// alert(del_id);
swal({
        title: "Are you sure?",
        // text: "You will not be able to recover this imaginary file!",
        type: "warning",
        showCancelButton: true,
        confirmButtonClass: "btn-danger",
        confirmButtonText: "Yes, delete it!",
        cancelButtonText: "No, cancel please!",
        closeOnConfirm: false,
        closeOnCancel: false
      },
      function(isConfirm) {
        if (isConfirm) {
          $.ajax({
            url: "<?php echo base_url(); ?>/contact-delete",
            type: "POST",
            data: {delid : del_id},
            dataType: "html",
             error: function() {
                alert('Something is wrong');
             },
             success: function(data) {
                  // $("#"+id).remove();
                  swal("Deleted!", "Contact Deleted Successfully.", "success");
                  window.location.reload();
             }
          });
        } else {
          swal("Cancelled", "Operation Cancelled by User", "error");
        }
});

});
});

// END DELETING CONTACTS

// start deleting attendance log

  $(document).ready(function() {
  $(document).on("click", '.Adel-record', function(event) {
  var del_id = $(this).attr('id');
  swal({
          title: "Are you sure?",
          // text: "You will not be able to recover this imaginary file!",
          type: "warning",
          showCancelButton: true,
          confirmButtonClass: "btn-danger",
          confirmButtonText: "Yes, delete it!",
          cancelButtonText: "No, cancel please!",
          closeOnConfirm: false,
          closeOnCancel: false
        },
        function(isConfirm) {
          if (isConfirm) {
            $.ajax({
              url: "<?php echo base_url(); ?>/del-attendance",
              type: "POST",
              data: {delid : del_id},
              dataType: "html",
              error: function() {
                  alert('Something is wrong');
              },
              success: function(data) {
                    // $("#"+id).remove();
                    swal("Deleted!", "Attendance Log deleted successfully", "success");
                    window.location.reload();
              }
            });
          } else {
            swal("Cancelled", "Operation cancelled by user", "error");
          }
  });

  });
  });

// end deleting attendance log


  // start manage church delete

  $(document).ready(function() {
$(document).on("click", '.church1-del-record', function(event) {
var del_id = $(this).attr('id');
// alert(del_id);
swal({
        title: "Are you sure?",
        // text: "You will not be able to recover this imaginary file!",
        type: "warning",
        showCancelButton: true,
        confirmButtonClass: "btn-danger",
        confirmButtonText: "Yes, delete it!",
        cancelButtonText: "No, cancel please!",
        closeOnConfirm: false,
        closeOnCancel: false
      },
      function(isConfirm) {
        if (isConfirm) {
          $.ajax({
            url: "<?php echo base_url(); ?>/delchurch",
            type: "POST",
            data: {delid : del_id},
            dataType: "html",
             error: function() {
                alert('Something is wrong');
             },
             success: function(data) {
                  // $("#"+id).remove();
                  swal("Deleted!", "Record Deleted Successfully", "success");
                  window.location.reload();
             }
          });
        } else {
          swal("Cancelled", "Operation Cancelled by user", "error");
        }
});

});
});

  // end manage church delete

  // start edit church modal window

  $(document).ready(function() {

    $(document).on("click", '.edit-church', function(event) { 

       var del_id = $(this).attr('id');

      // alert(del_id);

          $.ajax({

             url: "<?php echo base_url(); ?>/edit-church",//Enter full URL

             type: 'POST',

             dataType:'JSON',

             data: {delid : del_id},

             success: function(data){

                 console.log(data);    

                $('#id').val(data['church'].id);
                $('#church_name').val(data['church'].church_name);
                $('#church_email').val(data['church'].church_email);
                $('#website').val(data['church'].website);
                $('#phone').val(data['church'].phone);
                $('#address').val(data['church'].address);
                $('#pastor_name').val(data['church'].pastor_name);
                $('#time_zone').val(data['church'].time_zone);
                $('#plan').val(data['church'].plan_id);


                // $('#key_value').val(data.key_value); 

             }

          });

    });

    });
  // end edit church modal window

</script>

<script>
         $(document).on('click', '#save_tags_data', function(e) {
      
            var id =  $('#userid').val();
            var details = $('#details').text();


var url = '<?php echo base_url(); ?>insert-tags';

$.ajax({

    type: "POST",

    url: url,

    data:{details:details,id:id},

    success: function(data) {

        console.log(data);

   

    }

});

});
</script>

<script>

$(document).ready(function() {



//$('.del-record').on('click',function(){

$(document).on("click", '.del-integ', function(event) { 



var del_id = $(this).attr('id');

swal({
        title: "Are you sure?",
        // text: "You will not be able to recover this imaginary file!",
        type: "warning",
        showCancelButton: true,
        confirmButtonClass: "btn-danger",
        confirmButtonText: "Yes, delete it!",
        cancelButtonText: "No, cancel please!",
        closeOnConfirm: false,
        closeOnCancel: false
      },
      function(isConfirm) {
        if (isConfirm) {
          $.ajax({
            url: "<?php echo base_url(); ?>del-integration",
            type: "POST",
            data: {delid : del_id},
            dataType: "html",
             error: function() {
                alert('Something is wrong');
             },
             success: function(data) {
                  // $("#"+id).remove();
                  swal("Deleted!", "Record Deleted Successfully.", "success");
                  window.location.reload();
             }
          });
        } else {
          swal("Cancelled", "Operation cancelled by user", "error");
        }
});

});


// start edit manage checkin

$(document).on("click", '.mc-edit', function(event) { 
// alert("kjfhwueiafhweafrlw");

   var mc_id = $(this).attr('id');

  // alert(del_id);

      $.ajax({

         url: "<?php echo base_url(); ?>mcedit",//Enter full URL

         type: 'POST',

         dataType:'JSON',

         data: {mc_id : mc_id},

         success: function(data){

            //  console.log(data);    

            $('input[name=id]').val(data.mc_id);

            $('#mc_title').val(data.mc_title); 

         }

      });

});

// end edit manage checkin


// del manage checkins

$(document).on("click", '.mc-del', function(event) { 

var del_id = $(this).attr('id');

swal({
        title: "Are you sure?",
        // text: "You will not be able to recover this imaginary file!",
        type: "warning",
        showCancelButton: true,
        confirmButtonClass: "btn-danger",
        confirmButtonText: "Yes, delete it!",
        cancelButtonText: "No, cancel please!",
        closeOnConfirm: false,
        closeOnCancel: false
      },
      function(isConfirm) {
        if (isConfirm) {
          $.ajax({
            url: "<?php echo base_url(); ?>mcdel",
            type: "POST",
            data: {delid : del_id},
            dataType: "html",
             error: function() {
                alert('Something is wrong');
             },
             success: function(data) {
                  // $("#"+id).remove();
                  swal("Deleted!", "Record Deleted Successfully.", "success");
                  window.location.reload();
             }
          });
        } else {
          swal("Cancelled", "Operation cancelled by user", "error");
        }
});

});

// del manage checkins
});

</script>

<!-- End 15th March -->
<script>
   $(document).ready(function() {
  $(".edit-record").click(function() {
   
    var id = $(this).data("id");
    // alert(id);

    $.ajax({

      type:"POST",                   

      url: "<?php echo base_url(); ?>get_option",//Enter full URL

      data: {id:id},
      dataType: 'Json',
      success: function(data){

          console.log(data);

         

          $('#po_title').val(data.po_title);
          $('#hidden_id').val(data.po_id);

          // $("#response").html(data);

      }

      });
  });
});

</script>
<script>
        $(document).ready(function() {
            // Function to show a toast notification
            function showToast(message) {
                Toastify({
                    text: message,
                    duration: 5000, // 5 seconds
                    gravity: "top", // Display toast at the top
                    position: "right", // Display toast on the left side
                    backgroundColor: "#4caf50", // Green for success
                }).showToast();
            }

            // Check if there's a session variable for checks
            <?php if (session()->has('checks')): ?>
                <?php $checks = session()->get('checks'); ?>
                showToast("<?php echo $checks['check']; ?>");
            <?php endif; ?>

            // Clear the session variable after displaying the toast
            <?php session()->remove('checks'); ?>
            
        });
    </script>
 <script>
    $(document).ready(function() {
        // Function to show a toast notification
        function showToast(message) {
            Toastify({
                text: message,
                duration: 5000, // 5 seconds
                gravity: "top", // Display toast at the top
                position: "right", // Display toast on the right side
                backgroundColor: "#4caf50", // Green for success
            }).showToast();
        }

        // Check if there's a session variable for Phone_number_already_exists
        <?php if (session()->has('Phone_number_already_exists')): ?>
            showToast("<?php echo session()->get('Phone_number_already_exists'); ?>");
        <?php endif; ?>
    });
</script>
<!-- Add this JavaScript code inside a script tag or in a separate JS file -->
<script>
function fetchNotificationCount() {

  $.ajax({
    url: "<?php echo base_url(); ?>tasknotification",
    type: 'GET',
    dataType: 'json',
    success: function(response) {
		
 
    },
    error: function() {
      // Handle error if needed
    }
  });
}
</script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const cancelButton = document.querySelector(".cancel");
        const formDiv = document.getElementById("myDIV");

        cancelButton.addEventListener("click", function(event) {
            event.preventDefault();
            formDiv.style.display = "none";
        });
    });
</script>

<script>

    $(document).ready(function(){
      $(document).ready(function() {
        
        $('.closecomments').on('click', function() {
          var status = "";
    var type = "" ;
    load_contacts_table(status,type);
            // alert('Close comments clicked!');
        });
    });
    var status = "";
    var type = "" ;
    load_contacts_table(status,type);
    function load_contacts_table(status,type){
  
      if ( $.fn.dataTable.isDataTable( '#task-details' ) ) {
        $( '#task-details' ).DataTable().destroy();
      }

        var dataTable = $('#task-details').DataTable({

          'processing': true,

          'serverSide': true,

          'serverMethod': 'POST',

          dom: 'Blfrtip',
          buttons: [
                'copyHtml5',
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5'
          ],

          columnDefs: [
              {
                  target: 1,
                  visible: false,
              },
          ],

          //'searching': false, // Remove default Search Control

          'ajax': {

            'url':'gettaskdetails',

            'data': function(data){
              data.searchByStatus = status;
              data.searchByType = type;

            }

          },

          'columns': [

            { data: 'title' }, 

            { data: 'owner' },

            { data: 'stasus' },

            { data: 'duedate' },

            { data: 'action' },

            

           

          ],

          

        });

        if(status != ""){
          dataTable.draw();
        }

        if(type != ""){
          dataTable.draw();
        }

    }


    $('#status').on('change', function() {
            load_contacts_table($(this).val(),$("#type").val());
    });


    $('#type').on('change', function() {
            load_contacts_table($("#status").val(),$(this).val());
    });


    });

</script>
<script>
    function openModalWithId(id) {

        $.ajax({
          url: '<?php echo base_url(); ?>/gettaskdetailsid',
            type: 'GET',
            data: { id: id }, 
            dataType: 'json', 
            success: function (data) {
              console.log(data);
              $('#title').text(data.notes.title);
                $('#description').text(data.notes.text);
                $('#comments').text(data.comments.comments);
                if (data.comments && Array.isArray(data.comments)) {
                    // Get the comments container
                    var commentsContainer = $('#commentsContainer');
                    commentsContainer.empty(); // Clear any previous comments

                    // Loop through comments and append them as <p> elements
                    $.each(data.comments, function (index, value) {
                        commentsContainer.append('<p class="list-group-item">' + value.comments + '</p>');
                    });
                }


                    
              // $('#title').val(data.title);
              // $('#title').val(data.title);

                $('#input').val(id);
                $('#myModal').modal('show');
            },
            error: function (xhr, status, error) {
              alert("Error occurred while fetching data from the server: " + error);
            }
        });
    }
</script>
<script>
    function savecomments() {
      var id=$('#input').val();
      var status=$('#status1').val();

      var description=$('#taskcomment').val();

        $.ajax({
          url: '<?php echo base_url(); ?>/savetaskcomment',
            type: 'GET',
            data: { id: id ,description: description,status: status}, 
            dataType: 'json', 
            success: function (data) {
              var commentItem = '<li class="list-group-item">' + data.comments + '</li>';
                $('#commentList').append(commentItem);

                // Clear the textarea after successfully saving the comment
                $('#taskcomment').val('');
             
            
            },
            error: function (xhr, status, error) {
              alert("Error occurred while fetching data awais from the server: " + error);
            }
        });
        
    }
   
</script>



<style type="text/css">
  div.dt-buttons {
    float: right;
}
</style>

  </body>

</html>